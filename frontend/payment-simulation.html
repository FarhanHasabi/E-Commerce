<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment - Glamora</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f7f9fb;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            justify-content: center;
            align-items: center;
        }
        .font-playfair {
            font-family: 'Playfair Display', serif;
        }
        .payment-card {
            background-color: white;
            padding: 1rem 1.5rem; /* Mengurangi padding vertikal dan horizontal lagi */
            border-radius: 0.75rem; /* Sedikit mengurangi border-radius */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); /* Sedikit mengurangi shadow */
            max-width: 450px; /* Mengurangi lebar */
            width: 90%;
            text-align: center;
            border: 2px solid #ec4899; /* Mengubah dari border-top menjadi border keseluruhan, ketebalan 2px */
        }
        .payment-card h1 {
            font-size: 1.5rem; /* Mengurangi ukuran font lebih kecil */
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.7rem; /* Mengurangi margin */
        }
        .payment-card p {
            font-size: 0.9rem; /* Mengurangi ukuran font */
            color: #555;
            margin-bottom: 0.6rem; /* Mengurangi margin */
        }
        .payment-card .amount {
            font-size: 1.6rem; /* Mengurangi ukuran font lebih kecil */
            font-weight: 800;
            color: #ec4899;
            margin-bottom: 1rem; /* Mengurangi margin */
        }
        .payment-card .btn-confirm {
            background-color: #10b981;
            color: white;
            padding: 0.6rem 1.5rem; /* Mengurangi padding tombol */
            border-radius: 0.4rem; /* Sedikit mengurangi border-radius tombol */
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        .payment-card .btn-confirm:hover {
            background-color: #059669;
        }
        .payment-card .btn-cancel {
            background-color: #ef4444;
            color: white;
            padding: 0.6rem 1.5rem; /* Mengurangi padding tombol */
            border-radius: 0.4rem; /* Sedikit mengurangi border-radius tombol */
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        .payment-card .btn-cancel:hover {
            background-color: #dc2626;
        }
        .order-details-summary {
            text-align: left;
            margin-top: 1rem; /* Mengurangi margin */
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }
        .order-details-summary h3 {
            font-size: 1.1rem; /* Mengurangi ukuran font */
            font-weight: 600;
            color: #333;
            margin-bottom: 0.6rem; /* Mengurangi margin */
        }
        .order-details-summary div {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.15rem; /* Mengurangi margin lebih kecil */
            font-size: 0.8rem; /* Mengurangi ukuran font */
        }
        .order-details-summary div span:first-child {
            color: #666;
        }
        .order-details-summary div span:last-child {
            font-weight: 500;
            color: #333;
        }
        .order-details-summary .item-list {
            margin-top: 0.6rem; /* Mengurangi margin */
            border-top: 1px dashed #ddd;
            padding-top: 0.6rem; /* Mengurangi padding */
            max-height: 100px; /* Mengurangi tinggi maksimum scrollable area */
            overflow-y: auto;
        }
        .order-details-summary .item-list h4 {
            font-size: 0.85rem; /* Mengurangi ukuran font */
            margin-bottom: 0.4rem; /* Mengurangi margin */
        }
        .order-details-summary .item-list p {
            margin: 0.15rem 0; /* Mengurangi margin lebih kecil */
            font-size: 0.75rem; /* Mengurangi ukuran font paling kecil */
            display: flex;
            justify-content: space-between;
        }
        .order-details-summary .item-list p span:first-child {
            color: #444;
        }
        .order-details-summary .item-list p span:last-child {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="payment-card">
        <h1 class="font-playfair">Pembayaran</h1>
        <p>Anda akan melakukan pembayaran untuk pesanan Anda.</p>
        <p class="text-gray-700 font-medium">Metode Pembayaran: <span id="paymentMethodDisplay" class="font-semibold text-pink-600"></span></p>
        <p class="amount" id="totalAmountDisplay">Rp 0</p>
        
        <div class="order-details-summary">
            <h3>Detail Pesanan</h3>
            <div>
                <span>Nama Lengkap:</span>
                <span id="detailFullName"></span>
            </div>
            <div>
                <span>Email:</span>
                <span id="detailEmail"></span>
            </div>
            <div>
                <span>Alamat Pengiriman:</span>
                <span id="detailAddress"></span>
            </div>
            <div>
                <span>Kota:</span>
                <span id="detailCity"></span>
            </div>
            <div>
                <span>Kode Pos:</span>
                <span id="detailPostalCode"></span>
            </div>
            <div>
                <span>Nomor Telepon:</span>
                <span id="detailPhone"></span>
            </div>
            <div class="item-list">
                <h4>Item dalam Pesanan:</h4>
                <div id="detailItems">
                    </div>
            </div>
        </div>

        <div class="flex justify-center space-x-4 mt-5"> <button id="confirmPaymentBtn" class="btn-confirm">Bayar Sekarang</button>
            <button id="cancelPaymentBtn" class="btn-cancel">Batalkan Pembayaran</button>
        </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const totalAmountDisplay = document.getElementById('totalAmountDisplay');
            const paymentMethodDisplay = document.getElementById('paymentMethodDisplay');
            const confirmPaymentBtn = document.getElementById('confirmPaymentBtn');
            const cancelPaymentBtn = document.getElementById('cancelPaymentBtn');

            // Detail pengiriman
            const detailFullName = document.getElementById('detailFullName');
            const detailEmail = document.getElementById('detailEmail');
            const detailAddress = document.getElementById('detailAddress');
            const detailCity = document.getElementById('detailCity');
            const detailPostalCode = document.getElementById('detailPostalCode');
            const detailPhone = document.getElementById('detailPhone');
            const detailItems = document.getElementById('detailItems');


            // Ambil data dari sessionStorage
            const simulatedPaymentData = JSON.parse(sessionStorage.getItem('simulatedPaymentData'));

            if (simulatedPaymentData) {
                totalAmountDisplay.textContent = formatRupiah(simulatedPaymentData.totalAmount);
                paymentMethodDisplay.textContent = getPaymentMethodName(simulatedPaymentData.paymentMethod);

                // Tampilkan detail pengiriman
                detailFullName.textContent = simulatedPaymentData.fullName;
                detailEmail.textContent = simulatedPaymentData.email;
                detailAddress.textContent = `${simulatedPaymentData.address}`;
                detailCity.textContent = simulatedPaymentData.city;
                detailPostalCode.textContent = simulatedPaymentData.postalCode;
                detailPhone.textContent = simulatedPaymentData.phone;

                // Tampilkan item dalam pesanan
                if (simulatedPaymentData.items && simulatedPaymentData.items.length > 0) {
                    detailItems.innerHTML = '';
                    simulatedPaymentData.items.forEach(item => {
                        const itemEl = document.createElement('p');
                        itemEl.innerHTML = `<span>${item.name} x ${item.quantity}</span><span>${formatRupiah(item.price * item.quantity)}</span>`;
                        detailItems.appendChild(itemEl);
                    });
                } else {
                    detailItems.innerHTML = '<p>Tidak ada item dalam pesanan.</p>';
                }

            } else {
                totalAmountDisplay.textContent = 'Data pembayaran tidak ditemukan.';
                paymentMethodDisplay.textContent = '-';
                confirmPaymentBtn.disabled = true;
                cancelPaymentBtn.disabled = true;
                // Sembunyikan detail jika tidak ada data
                document.querySelector('.order-details-summary').style.display = 'none';
            }

            function formatRupiah(number) {
                return new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(number);
            }

            function getPaymentMethodName(methodValue) {
                switch (methodValue) {
                    case 'transfer': return 'Transfer Bank (BCA / Mandiri)';
                    case 'dana': return 'E-Wallet (Dana / GoPay)';
                    case 'cod': return 'Cash On Delivery (COD)';
                    default: return 'Tidak Diketahui';
                }
            }

            confirmPaymentBtn.addEventListener('click', function() {
                // Simpan status pembayaran berhasil
                sessionStorage.setItem('paymentStatus', 'success');
                window.location.href = 'order-confirmation.html';
            });

            cancelPaymentBtn.addEventListener('click', function() {
                // Simpan status pembayaran gagal
                sessionStorage.setItem('paymentStatus', 'failed');
                window.location.href = 'order-confirmation.html';
            });
        });
    </script>
</body>
</html>